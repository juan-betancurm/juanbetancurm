---
import ParticlesBackground from "../components/ParticlesBackground.astro";
import PageTransition from "src/components/PageTransition.astro";
import BottomLayout from "src/layouts/BottomLayout.astro";
import TopLayout from "src/layouts/TopLayout.astro";
import { WORK } from "src/consts";
import { getCollection } from "astro:content";

const collection = await getCollection("work");

collection.sort(
	(a, b) =>
		new Date(b.data.dateStart).getTime() - new Date(a.data.dateStart).getTime(),
);

const work = await Promise.all(
	collection.map(async (item) => {
		const { Content } = await item.render();
		return { ...item, Content };
	}),
);

function formatWorkDate(input: Date | string) {
	if (typeof input === "string") return input;

	const month = input.toLocaleDateString("en-US", {
		month: "short",
	});

	const year = new Date(input).getFullYear();
	return `${month} ${year}`;
}
---

<!-- Tu sección Hero -->
<section
	class="relative flex flex-col items-center justify-center min-h-screen bg-white overflow-hidden pt-16"
>

	<!-- 1. Aquí insertamos el componente de partículas -->
	<div class="absolute inset-0 z-0">
		
		<ParticlesBackground />
	</div>

	<!-- 2. Contenedor del círculo gigante invertido -->
	<div
		id="planetcont"
		class="animate absolute inset-0 top-1/4 overflow-hidden z-10"
	>
		<div
			id="crescent"
			class="absolute top-0 left-1/2 -translate-x-1/2 w-[250vw] min-h-[100vh] aspect-square rounded-full p-[1px] bg-gradient-to-b from-black/25 from-0% to-transparent to-5%"
		>
			<div
				id="planet"
				class="w-full h-full bg-white rounded-full p-[1px] overflow-hidden flex justify-center"
			>
				<div
					id="blur"
					class="w-full h-20 rounded-full bg-neutral-900/25 blur-3xl"
				>
				</div>
			</div>
		</div>
	</div>

	<!-- 3. Tu contenido (Texto) -->
	<div
		class="relative z-10 text-center px-4 sm:px-6 md:px-8 py-12 sm:py-16 md:py-0"
	>
		<div
			class="relative z-10 flex flex-col items-center mt-16 sm:mt-20 md:mt-24 lg:mt-32 max-w-4xl mx-auto"
		>
			<h1
				class="text-base sm:text-lg md:text-xl text-gray-400 mb-8 sm:mb-10 max-w-2xl mx-auto leading-relaxed"
			>
				Hi, I'm Juan Betancur
			</h1>

			<div
				class="flex flex-col sm:flex-row gap-4 w-full sm:w-auto px-4 sm:px-0"
			>
				<a
					href="work"
					class="bg-gray-900 hover:bg-gray-700 transition-colors px-6 sm:px-8 py-3 sm:py-4 rounded-lg font-semibold shadow-lg shadow-blue-900/50 text-center text-sm sm:text-base text-white"
				>
					Work
				</a>
				<a
					href="projects"
					class="bg-gray-900 hover:bg-gray-700 transition-colors px-6 sm:px-8 py-3 sm:py-4 rounded-lg font-semibold shadow-lg shadow-blue-900/50 text-center text-sm sm:text-base text-white"
				>
					Projects
				</a>
			</div>
		</div>
	</div>

</section>


